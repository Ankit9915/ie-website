{% extends "admin-base.html" %}
{% load app_filters %}
{% block title %}All Candidates{% endblock %}
{% block sidebar_all_candidates %}active{% endblock %}
{% block body_header %}
    Candidates
    <br>
{% endblock %}
{% block body %}
    <table id="datatable" class="table table-hover table-striped table-bordered">
        <thead>
        <th>Username</th>
        <th>First name</th>
        <th>Last name</th>
        <th>Phone Number</th>
        <th>Roll No.</th>
        <th>Pref 1</th>
        <th>Pref 2</th>
        <th>Pref 3</th>
        <th>Pref 4</th>

        </thead>
        <tbody>
        {% for candidate in query %}
            <tr>
                {% comment %}{% if user.username != candidate.user.user.username %}{% endcomment %}

                <td>{{ candidate.user.username }}</td>
                <td>{{ candidate.profile.firstname }}</td>
                <td>{{ candidate.profile.lastname }}</td>
                <td>{{ candidate.profile.phone }}</td>
                <td>{{ candidate.roll_no }}</td>
                {% for preference in candidate.status_set.all %}
                    <td>
                        <strong> {{ preference.to_sig }} </strong><br>
                        {{ preference.to_status }}
                    </td>
                {% endfor %}



            </tr>
        {% endfor %}
        </tbody>
    </table>
    
    <script type="text/javascript">
        $(document).ready(function () {

            //ugly hack to prevent alert which comes if there's less than 2 preferences.
            $.fn.dataTable.ext.errMode = 'none';

            $('#datatable').DataTable({
                "dom": 'lBfrtip',
                buttons: [
                    'csv'
                ]
            });
        });
    </script>

{% endblock %}
